<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Solar System Orrery with Dwarf Planets and Comets</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/jsm/utils/FontLoader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/jsm/geometries/TextGeometry.js"></script>
    <script>
        let scene, camera, renderer, sun, planets = [], dwarfPlanets = [], comets = [];

        // Orbital parameters for planets (semi-major axis in AU, eccentricity, period in Earth years, inclination in degrees, axial tilt in degrees)
        const planetData = [
            { name: 'Mercury', radius: 0.2, semiMajorAxis: 0.39, eccentricity: 0.205, period: 0.24, inclination: 7.0, axialTilt: 0.034, color: 0xaaaaaa },
            { name: 'Venus', radius: 0.3, semiMajorAxis: 0.72, eccentricity: 0.007, period: 0.615, inclination: 3.4, axialTilt: 177.4, color: 0xffcc00 },
            { name: 'Earth', radius: 0.35, semiMajorAxis: 1.00, eccentricity: 0.017, period: 1.00, inclination: 0.0, axialTilt: 23.5, color: 0x0000ff },
            { name: 'Mars', radius: 0.25, semiMajorAxis: 1.52, eccentricity: 0.093, period: 1.88, inclination: 25.2, axialTilt: 25.2, color: 0xff0000 },
            { name: 'Jupiter', radius: 0.5, semiMajorAxis: 5.20, eccentricity: 0.049, period: 11.86, inclination: 1.3, axialTilt: 3.1, color: 0xffcc99 },
            { name: 'Saturn', radius: 0.4, semiMajorAxis: 9.58, eccentricity: 0.056, period: 29.46, inclination: 2.5, axialTilt: 26.7, color: 0xffff00 },
            { name: 'Uranus', radius: 0.3, semiMajorAxis: 19.22, eccentricity: 0.046, period: 84.01, inclination: 0.8, axialTilt: 97.8, color: 0x00ffff },
            { name: 'Neptune', radius: 0.3, semiMajorAxis: 30.05, eccentricity: 0.010, period: 164.8, inclination: 1.8, axialTilt: 28.3, color: 0x0000cc },
        ];

        // Dwarf planet data
        const dwarfPlanetData = [
            { name: 'Pluto', radius: 0.15, semiMajorAxis: 39.48, eccentricity: 0.249, period: 248, inclination: 17.2, axialTilt: 119.6, color: 0xcccccc },
            { name: 'Eris', radius: 0.15, semiMajorAxis: 96.3, eccentricity: 0.437, period: 557, inclination: 44.0, axialTilt: 8.3, color: 0x999999 },
            { name: 'Haumea', radius: 0.15, semiMajorAxis: 43.19, eccentricity: 0.199, period: 283, inclination: 28.2, axialTilt: 28.0, color: 0xffcc99 },
            { name: 'Makemake', radius: 0.15, semiMajorAxis: 45.79, eccentricity: 0.160, period: 305, inclination: 28.0, axialTilt: 28.2, color: 0xccffcc },
            { name: 'Ceres', radius: 0.15, semiMajorAxis: 2.77, eccentricity: 0.080, period: 4.60, inclination: 4.0, axialTilt: 3.4, color: 0xffff00 },
        ];

        // Comet data
        const cometData = [
            { name: 'Halley', radius: 0.1, semiMajorAxis: 17.8, eccentricity: 0.967, period: 76, inclination: 162.3, axialTilt: 0, color: 0x00ff00 },
            { name: 'Hale-Bopp', radius: 0.1, semiMajorAxis: 2533.0, eccentricity: 0.995, period: 2530, inclination: 10.3, axialTilt: 0, color: 0xff00ff },
            { name: 'Encke', radius: 0.1, semiMajorAxis: 6.5, eccentricity: 0.847, period: 3.3, inclination: 22.0, axialTilt: 0, color: 0xff8800 },
            { name: 'Swift-Tuttle', radius: 0.1, semiMajorAxis: 133.0, eccentricity: 0.963, period: 133, inclination: 113.7, axialTilt: 0, color: 0x0088ff },
            { name: 'Biela', radius: 0.1, semiMajorAxis: 6.0, eccentricity: 0.93, period: 6.0, inclination: 8.3, axialTilt: 0, color: 0xffcc00 },
        ];

        function init() {
            // Create the scene
            scene = new THREE.Scene();

            // Create the camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 20, 60); // Initial camera position

            // Create the renderer
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // Disable camera controls
            // No controls are created, making the camera fixed

            // Create the sun
            const sunGeometry = new THREE.SphereGeometry(0.5, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffff00 });
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            scene.add(sun);

            // Create planets and their orbits
            planetData.forEach(data => {
                createCelestialBody(data, planets);
            });

            // Create dwarf planets and their orbits
            dwarfPlanetData.forEach(data => {
                createCelestialBody(data, dwarfPlanets);
            });

            // Create comets and their orbits
            cometData.forEach(data => {
                createCelestialBody(data, comets);
            });
        }

        function createCelestialBody(data, collection) {
            // Create celestial body
            const geometry = new THREE.SphereGeometry(data.radius, 32, 32);
            const material = new THREE.MeshBasicMaterial({ color: data.color });
            const celestialBody = new THREE.Mesh(geometry, material);
            
            // Calculate angular speed based on the orbital period (convert to radians per frame)
            celestialBody.userData = { 
                semiMajorAxis: data.semiMajorAxis, 
                eccentricity: data.eccentricity,
                period: data.period, 
                speed: (2 * Math.PI) / (data.period * 60), // 60 frames per second
                angle: 0,
                inclination: THREE.MathUtils.degToRad(data.inclination), // Convert to radians
                axialTilt: THREE.MathUtils.degToRad(data.axialTilt) // Convert to radians
            };
            celestialBody.rotation.x = celestialBody.userData.axialTilt; // Apply axial tilt

            // Add celestial body to the scene
            collection.push(celestialBody);
            scene.add(celestialBody);

            // Create orbit line
            createOrbitLine(data);

            // Create text label for the celestial body
            createTextLabel(data.name, celestialBody);
        }

        function createOrbitLine(data) {
            const points = [];
            const resolution = 100; // Number of points to define the orbit
            for (let i = 0; i < resolution; i++) {
                const angle = (i / resolution) * 2 * Math.PI; // Angle in radians
                const radius = data.semiMajorAxis * 5; // Scale for visibility
                const x = radius * Math.cos(angle);
                const z = radius * Math.sin(angle) * Math.sqrt(1 - Math.pow(data.eccentricity, 2));

                points.push(new THREE.Vector3(x, 0, z));
            }

            const orbitGeometry = new THREE.BufferGeometry().setFromPoints(points);
            const orbitMaterial = new THREE.LineBasicMaterial({ color: 0x555555, transparent: true, opacity: 0.5 });
            const orbitLine = new THREE.Line(orbitGeometry, orbitMaterial);

            scene.add(orbitLine);
        }

        function createTextLabel(text, celestialBody) {
            const loader = new THREE.FontLoader();
            loader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function (font) {
                const textGeometry = new THREE.TextGeometry(text, {
                    font: font,
                    size: 0.5,
                    height: 0.1,
                    curveSegments: 12,
                    bevelEnabled: false
                });

                const textMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
                const textMesh = new THREE.Mesh(textGeometry, textMaterial);

                // Position the label above the celestial body
                textMesh.position.set(celestialBody.position.x, celestialBody.position.y + 1, celestialBody.position.z);
                scene.add(textMesh);

                // Update position on each frame
                celestialBody.userData.textMesh = textMesh; // Store reference for updating
            });
        }

        function animate() {
            requestAnimationFrame(animate);
            
            // Update planets' positions
            planets.forEach(planet => {
                updateCelestialBodyPosition(planet);
            });

            // Update dwarf planets' positions
            dwarfPlanets.forEach(dwarfPlanet => {
                updateCelestialBodyPosition(dwarfPlanet);
            });

            // Update comets' positions
            comets.forEach(comet => {
                updateCelestialBodyPosition(comet);
            });

            // Update text labels positions
            updateTextLabels();

            // Render the scene
            renderer.render(scene, camera);
        }

        function updateCelestialBodyPosition(celestialBody) {
            const { semiMajorAxis, eccentricity, speed, angle, inclination } = celestialBody.userData;

            // Update angle
            celestialBody.userData.angle += speed;
            const radius = semiMajorAxis * 5; // Scale for visibility
            const x = radius * Math.cos(celestialBody.userData.angle);
            const z = radius * Math.sin(celestialBody.userData.angle) * Math.sqrt(1 - Math.pow(eccentricity, 2));

            // Update position based on inclination
            celestialBody.position.x = x;
            celestialBody.position.z = z * Math.cos(inclination);
            celestialBody.position.y = z * Math.sin(inclination); // y-axis movement due to inclination
        }

        function updateTextLabels() {
            planets.forEach(planet => {
                if (planet.userData.textMesh) {
                    planet.userData.textMesh.position.set(planet.position.x, planet.position.y + 1, planet.position.z);
                }
            });
            dwarfPlanets.forEach(dwarfPlanet => {
                if (dwarfPlanet.userData.textMesh) {
                    dwarfPlanet.userData.textMesh.position.set(dwarfPlanet.position.x, dwarfPlanet.position.y + 1, dwarfPlanet.position.z);
                }
            });
            comets.forEach(comet => {
                if (comet.userData.textMesh) {
                    comet.userData.textMesh.position.set(comet.position.x, comet.position.y + 1, comet.position.z);
                }
            });
        }

        init();
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
